
import { useRouter } from 'next/router';
import useSWR from 'swr';
import axios from 'axios';
import { Grid, GridItem, Box, Table, TableCaption, TableContainer, Tbody, Td, Tfoot, Th, Thead, Tr } from '@chakra-ui/react'
import LeagueCarousel from '../../../components/LeagueCarousel';
import PositionDraftTable from '../../../components/PositionDraftTable';

const testDraft = [{"round":1,"roster_id":5,"player_id":"8155","picked_by":"334560424026464256","pick_no":1,"metadata":{"years_exp":"0","team":"NYJ","status":"Active","sport":"nfl","position":"RB","player_id":"8155","number":"0","news_updated":"1651275628504","last_name":"Hall","injury_status":"","first_name":"Breece"},"is_keeper":null,"draft_slot":1,"draft_id":"785517577924403201"},{"round":1,"roster_id":3,"player_id":"8151","picked_by":"418508842045816832","pick_no":2,"metadata":{"years_exp":"0","team":"SEA","status":"Active","sport":"nfl","position":"RB","player_id":"8151","number":"0","news_updated":"1651276228545","last_name":"Walker","injury_status":"","first_name":"Kenneth"},"is_keeper":null,"draft_slot":2,"draft_id":"785517577924403201"},{"round":1,"roster_id":7,"player_id":"8160","picked_by":"384828695832965120","pick_no":3,"metadata":{"years_exp":"0","team":"PIT","status":"Active","sport":"nfl","position":"QB","player_id":"8160","number":"8","news_updated":"1651418723026","last_name":"Pickett","injury_status":"","first_name":"Kenny"},"is_keeper":null,"draft_slot":3,"draft_id":"785517577924403201"},{"round":1,"roster_id":9,"player_id":"8135","picked_by":"237079471004315648","pick_no":4,"metadata":{"years_exp":"0","team":"TEN","status":"Active","sport":"nfl","position":"WR","player_id":"8135","number":"0","news_updated":"1651198826095","last_name":"Burks","injury_status":"","first_name":"Treylon"},"is_keeper":null,"draft_slot":4,"draft_id":"785517577924403201"},{"round":1,"roster_id":10,"player_id":"8148","picked_by":"376234176501932032","pick_no":5,"metadata":{"years_exp":"0","team":"DET","status":"Active","sport":"nfl","position":"WR","player_id":"8148","number":"0","news_updated":"1651339219264","last_name":"Williams","injury_status":"Questionable","first_name":"Jameson"},"is_keeper":null,"draft_slot":5,"draft_id":"785517577924403201"},{"round":1,"roster_id":2,"player_id":"8112","picked_by":"385185964898762752","pick_no":6,"metadata":{"years_exp":"0","team":"ATL","status":"Active","sport":"nfl","position":"WR","player_id":"8112","number":"0","news_updated":"1651195223775","last_name":"London","injury_status":"Questionable","first_name":"Drake"},"is_keeper":null,"draft_slot":6,"draft_id":"785517577924403201"},{"round":1,"roster_id":9,"player_id":"8146","picked_by":"237079471004315648","pick_no":7,"metadata":{"years_exp":"0","team":"NYJ","status":"Active","sport":"nfl","position":"WR","player_id":"8146","number":"0","news_updated":"1651195824592","last_name":"Wilson","injury_status":"","first_name":"Garrett"},"is_keeper":null,"draft_slot":7,"draft_id":"785517577924403201"},{"round":1,"roster_id":10,"player_id":"8144","picked_by":"376234176501932032","pick_no":8,"metadata":{"years_exp":"0","team":"NO","status":"Active","sport":"nfl","position":"WR","player_id":"8144","number":"0","news_updated":"1651196422594","last_name":"Olave","injury_status":"","first_name":"Chris"},"is_keeper":null,"draft_slot":8,"draft_id":"785517577924403201"},{"round":1,"roster_id":10,"player_id":"8138","picked_by":"376234176501932032","pick_no":9,"metadata":{"years_exp":"0","team":"BUF","status":"Active","sport":"nfl","position":"RB","player_id":"8138","number":"28","news_updated":"1651282232628","last_name":"Cook","injury_status":"","first_name":"James"},"is_keeper":null,"draft_slot":9,"draft_id":"785517577924403201"},{"round":1,"roster_id":2,"player_id":"8168","picked_by":"385185964898762752","pick_no":10,"metadata":{"years_exp":"0","team":"KC","status":"Active","sport":"nfl","position":"WR","player_id":"8168","number":"0","news_updated":"1651280430230","last_name":"Moore","injury_status":"","first_name":"Skyy"},"is_keeper":null,"draft_slot":10,"draft_id":"785517577924403201"},{"round":1,"roster_id":5,"player_id":"8167","picked_by":"334560424026464256","pick_no":11,"metadata":{"years_exp":"0","team":"GB","status":"Active","sport":"nfl","position":"WR","player_id":"8167","number":"0","news_updated":"1651275028293","last_name":"Watson","injury_status":"","first_name":"Christian"},"is_keeper":null,"draft_slot":11,"draft_id":"785517577924403201"},{"round":1,"roster_id":1,"player_id":"8137","picked_by":"367147189694337024","pick_no":12,"metadata":{"years_exp":"0","team":"PIT","status":"Active","sport":"nfl","position":"WR","player_id":"8137","number":"0","news_updated":"1651280129754","last_name":"Pickens","injury_status":"","first_name":"George"},"is_keeper":null,"draft_slot":12,"draft_id":"785517577924403201"},{"round":2,"roster_id":11,"player_id":"8129","picked_by":"395027646271983616","pick_no":13,"metadata":{"years_exp":"0","team":"HOU","status":"Active","sport":"nfl","position":"RB","player_id":"8129","number":"0","news_updated":"1651335617877","last_name":"Pierce","injury_status":"","first_name":"Dameon"},"is_keeper":null,"draft_slot":1,"draft_id":"785517577924403201"},{"round":2,"roster_id":3,"player_id":"8119","picked_by":"418508842045816832","pick_no":14,"metadata":{"years_exp":"0","team":"WAS","status":"Active","sport":"nfl","position":"WR","player_id":"8119","number":"1","news_updated":"1651198225285","last_name":"Dotson","injury_status":"","first_name":"Jahan"},"is_keeper":null,"draft_slot":2,"draft_id":"785517577924403201"},{"round":2,"roster_id":5,"player_id":"8142","picked_by":"334560424026464256","pick_no":15,"metadata":{"years_exp":"0","team":"IND","status":"Active","sport":"nfl","position":"WR","player_id":"8142","number":"0","news_updated":"1651280129752","last_name":"Pierce","injury_status":"","first_name":"Alec"},"is_keeper":null,"draft_slot":3,"draft_id":"785517577924403201"},{"round":2,"roster_id":10,"player_id":"8136","picked_by":"376234176501932032","pick_no":16,"metadata":{"years_exp":"0","team":"TB","status":"Active","sport":"nfl","position":"RB","player_id":"8136","number":"0","news_updated":"1651288229288","last_name":"White","injury_status":"","first_name":"Rachaad"},"is_keeper":null,"draft_slot":4,"draft_id":"785517577924403201"},{"round":2,"roster_id":6,"player_id":"8126","picked_by":"206902201266733056","pick_no":17,"metadata":{"years_exp":"0","team":"NYG","status":"Active","sport":"nfl","position":"WR","player_id":"8126","number":"0","news_updated":"1651277428625","last_name":"Robinson","injury_status":"","first_name":"Wan'Dale"},"is_keeper":null,"draft_slot":5,"draft_id":"785517577924403201"},{"round":2,"roster_id":5,"player_id":"8161","picked_by":"334560424026464256","pick_no":18,"metadata":{"years_exp":"0","team":"TEN","status":"Active","sport":"nfl","position":"QB","player_id":"8161","number":"0","news_updated":"1651287029164","last_name":"Willis","injury_status":"","first_name":"Malik"},"is_keeper":null,"draft_slot":6,"draft_id":"785517577924403201"},{"round":2,"roster_id":2,"player_id":"8159","picked_by":"385185964898762752","pick_no":19,"metadata":{"years_exp":"0","team":"ATL","status":"Active","sport":"nfl","position":"QB","player_id":"8159","number":"0","news_updated":"1651284333555","last_name":"Ridder","injury_status":"","first_name":"Desmond"},"is_keeper":null,"draft_slot":7,"draft_id":"785517577924403201"},{"round":2,"roster_id":10,"player_id":"8147","picked_by":"376234176501932032","pick_no":20,"metadata":{"years_exp":"0","team":"HOU","status":"Active","sport":"nfl","position":"WR","player_id":"8147","number":"0","news_updated":"1651329958700","last_name":"Metchie","injury_status":"Questionable","first_name":"John"},"is_keeper":null,"draft_slot":8,"draft_id":"785517577924403201"},{"round":2,"roster_id":11,"player_id":"8117","picked_by":"395027646271983616","pick_no":21,"metadata":{"years_exp":"0","team":"DAL","status":"Active","sport":"nfl","position":"WR","player_id":"8117","number":"0","news_updated":"1651287334112","last_name":"Tolbert","injury_status":"","first_name":"Jalen"},"is_keeper":null,"draft_slot":9,"draft_id":"785517577924403201"},{"round":2,"roster_id":5,"player_id":"8130","picked_by":"334560424026464256","pick_no":22,"metadata":{"years_exp":"0","team":"ARI","status":"Active","sport":"nfl","position":"TE","player_id":"8130","number":"0","news_updated":"1651280730531","last_name":"McBride","injury_status":"","first_name":"Trey"},"is_keeper":null,"draft_slot":10,"draft_id":"785517577924403201"},{"round":2,"roster_id":2,"player_id":"8118","picked_by":"385185964898762752","pick_no":23,"metadata":{"years_exp":"0","team":"CLE","status":"Active","sport":"nfl","position":"WR","player_id":"8118","number":"0","news_updated":"1651289136793","last_name":"Bell","injury_status":"","first_name":"David"},"is_keeper":null,"draft_slot":11,"draft_id":"785517577924403201"},{"round":2,"roster_id":3,"player_id":"8153","picked_by":"418508842045816832","pick_no":24,"metadata":{"years_exp":"0","team":"LAC","status":"Active","sport":"nfl","position":"RB","player_id":"8153","number":"0","news_updated":"1651338918122","last_name":"Spiller","injury_status":"Questionable","first_name":"Isaiah"},"is_keeper":null,"draft_slot":12,"draft_id":"785517577924403201"},{"round":3,"roster_id":5,"player_id":"8164","picked_by":"334560424026464256","pick_no":25,"metadata":{"years_exp":"0","team":"CAR","status":"Active","sport":"nfl","position":"QB","player_id":"8164","number":"0","news_updated":"1651288535517","last_name":"Corral","injury_status":"","first_name":"Matt"},"is_keeper":null,"draft_slot":1,"draft_id":"785517577924403201"},{"round":3,"roster_id":3,"player_id":"8211","picked_by":"418508842045816832","pick_no":26,"metadata":{"years_exp":"0","team":"SF","status":"Active","sport":"nfl","position":"RB","player_id":"8211","number":"0","news_updated":"1651288229284","last_name":"Davis-Price","injury_status":"","first_name":"Tyrion"},"is_keeper":null,"draft_slot":2,"draft_id":"785517577924403201"},{"round":3,"roster_id":7,"player_id":"8219","picked_by":"384828695832965120","pick_no":27,"metadata":{"years_exp":"0","team":"IND","status":"Active","sport":"nfl","position":"TE","player_id":"8219","number":"0","news_updated":"1651284333555","last_name":"Woods","injury_status":"","first_name":"Jelani"},"is_keeper":null,"draft_slot":3,"draft_id":"785517577924403201"},{"round":3,"roster_id":9,"player_id":"8162","picked_by":"237079471004315648","pick_no":28,"metadata":{"years_exp":"0","team":"WAS","status":"Active","sport":"nfl","position":"QB","player_id":"8162","number":"14","news_updated":"1651342223399","last_name":"Howell","injury_status":"","first_name":"Sam"},"is_keeper":null,"draft_slot":4,"draft_id":"785517577924403201"},{"round":3,"roster_id":6,"player_id":"8134","picked_by":"206902201266733056","pick_no":29,"metadata":{"years_exp":"0","team":"BUF","status":"Active","sport":"nfl","position":"WR","player_id":"8134","number":"10","news_updated":"1651343417671","last_name":"Shakir","injury_status":"","first_name":"Khalil"},"is_keeper":null,"draft_slot":5,"draft_id":"785517577924403201"},{"round":3,"roster_id":12,"player_id":"8139","picked_by":"361024227874512896","pick_no":30,"metadata":{"years_exp":"0","team":"LV","status":"Active","sport":"nfl","position":"RB","player_id":"8139","number":"0","news_updated":"1651338617502","last_name":"White","injury_status":"","first_name":"Zamir"},"is_keeper":null,"draft_slot":6,"draft_id":"785517577924403201"},{"round":3,"roster_id":6,"player_id":"8154","picked_by":"206902201266733056","pick_no":31,"metadata":{"years_exp":"0","team":"WAS","status":"Active","sport":"nfl","position":"RB","player_id":"8154","number":"8","news_updated":"1651289136793","last_name":"Robinson","injury_status":"","first_name":"Brian"},"is_keeper":null,"draft_slot":7,"draft_id":"785517577924403201"},{"round":3,"roster_id":5,"player_id":"8188","picked_by":"334560424026464256","pick_no":32,"metadata":{"years_exp":"0","team":"NE","status":"Active","sport":"nfl","position":"WR","player_id":"8188","number":"0","news_updated":"1651279529598","last_name":"Thornton","injury_status":"","first_name":"Tyquan"},"is_keeper":null,"draft_slot":8,"draft_id":"785517577924403201"},{"round":3,"roster_id":1,"player_id":"8132","picked_by":"367147189694337024","pick_no":33,"metadata":{"years_exp":"0","team":"ATL","status":"Active","sport":"nfl","position":"RB","player_id":"8132","number":"0","news_updated":"1651609811812","last_name":"Allgeier","injury_status":"","first_name":"Tyler"},"is_keeper":null,"draft_slot":9,"draft_id":"785517577924403201"},{"round":3,"roster_id":4,"player_id":"8123","picked_by":"376111571866267648","pick_no":34,"metadata":{"years_exp":"0","team":"TEN","status":"Active","sport":"nfl","position":"RB","player_id":"8123","number":"0","news_updated":"1651340121828","last_name":"Haskins","injury_status":"","first_name":"Hassan"},"is_keeper":null,"draft_slot":10,"draft_id":"785517577924403201"},{"round":3,"roster_id":4,"player_id":"8221","picked_by":"376111571866267648","pick_no":35,"metadata":{"years_exp":"0","team":"ARI","status":"Active","sport":"nfl","position":"RB","player_id":"8221","number":"0","news_updated":"1651351525470","last_name":"Ingram","injury_status":"","first_name":"Keaontay"},"is_keeper":null,"draft_slot":11,"draft_id":"785517577924403201"},{"round":3,"roster_id":9,"player_id":"8223","picked_by":"237079471004315648","pick_no":36,"metadata":{"years_exp":"0","team":"CHI","status":"Active","sport":"nfl","position":"WR","player_id":"8223","number":"0","news_updated":"1651283732484","last_name":"Jones","injury_status":"","first_name":"Velus"},"is_keeper":null,"draft_slot":12,"draft_id":"785517577924403201"},{"round":4,"roster_id":10,"player_id":"8208","picked_by":"376234176501932032","pick_no":37,"metadata":{"years_exp":"0","team":"BAL","status":"Active","sport":"nfl","position":"RB","player_id":"8208","number":"0","news_updated":"1651350926863","last_name":"Badie","injury_status":"","first_name":"Tyler"},"is_keeper":null,"draft_slot":1,"draft_id":"785517577924403201"},{"round":4,"roster_id":5,"player_id":"8172","picked_by":"334560424026464256","pick_no":38,"metadata":{"years_exp":"0","team":"DEN","status":"Active","sport":"nfl","position":"TE","player_id":"8172","number":"0","news_updated":"1651285534371","last_name":"Dulcich","injury_status":"","first_name":"Greg"},"is_keeper":null,"draft_slot":2,"draft_id":"785517577924403201"},{"round":4,"roster_id":7,"player_id":"8121","picked_by":"384828695832965120","pick_no":39,"metadata":{"years_exp":"0","team":"GB","status":"Active","sport":"nfl","position":"WR","player_id":"8121","number":"87","news_updated":"1651340417497","last_name":"Doubs","injury_status":"","first_name":"Romeo"},"is_keeper":null,"draft_slot":3,"draft_id":"785517577924403201"},{"round":4,"roster_id":5,"player_id":"8176","picked_by":"334560424026464256","pick_no":40,"metadata":{"years_exp":"0","team":"SF","status":"Active","sport":"nfl","position":"WR","player_id":"8176","number":"0","news_updated":"1651290630273","last_name":"Gray","injury_status":"","first_name":"Danny"},"is_keeper":null,"draft_slot":4,"draft_id":"785517577924403201"},{"round":4,"roster_id":6,"player_id":"8140","picked_by":"206902201266733056","pick_no":41,"metadata":{"years_exp":"0","team":"","status":"Active","sport":"nfl","position":"WR","player_id":"8140","number":"","news_updated":"1651601410625","last_name":"Ross","injury_status":"","first_name":"Justyn"},"is_keeper":null,"draft_slot":5,"draft_id":"785517577924403201"},{"round":4,"roster_id":1,"player_id":"8116","picked_by":"367147189694337024","pick_no":42,"metadata":{"years_exp":"0","team":"NE","status":"Active","sport":"nfl","position":"RB","player_id":"8116","number":"0","news_updated":"1651339219265","last_name":"Strong","injury_status":"","first_name":"Pierre"},"is_keeper":null,"draft_slot":6,"draft_id":"785517577924403201"},{"round":4,"roster_id":11,"player_id":"8110","picked_by":"395027646271983616","pick_no":43,"metadata":{"years_exp":"0","team":"DAL","status":"Active","sport":"nfl","position":"TE","player_id":"8110","number":"0","news_updated":"1651339817345","last_name":"Ferguson","injury_status":"","first_name":"Jake"},"is_keeper":null,"draft_slot":7,"draft_id":"785517577924403201"},{"round":4,"roster_id":6,"player_id":"8150","picked_by":"206902201266733056","pick_no":44,"metadata":{"years_exp":"0","team":"LAR","status":"Active","sport":"nfl","position":"RB","player_id":"8150","number":"0","news_updated":"1651345818107","last_name":"Williams","injury_status":"","first_name":"Kyren"},"is_keeper":null,"draft_slot":8,"draft_id":"785517577924403201"},{"round":4,"roster_id":8,"player_id":"8125","picked_by":"343873165421764608","pick_no":45,"metadata":{"years_exp":"0","team":"PIT","status":"Active","sport":"nfl","position":"WR","player_id":"8125","number":"0","news_updated":"1651341022396","last_name":"Austin","injury_status":"","first_name":"Calvin"},"is_keeper":null,"draft_slot":9,"draft_id":"785517577924403201"},{"round":4,"roster_id":10,"player_id":"8205","picked_by":"376234176501932032","pick_no":46,"metadata":{"years_exp":"0","team":"KC","status":"Active","sport":"nfl","position":"RB","player_id":"8205","number":"0","news_updated":"1651358727919","last_name":"Pacheco","injury_status":"","first_name":"Isaih"},"is_keeper":null,"draft_slot":10,"draft_id":"785517577924403201"},{"round":4,"roster_id":12,"player_id":"8171","picked_by":"361024227874512896","pick_no":47,"metadata":{"years_exp":"0","team":"TEN","status":"Active","sport":"nfl","position":"WR","player_id":"8171","number":"0","news_updated":"1651345818111","last_name":"Philips","injury_status":"","first_name":"Kyle"},"is_keeper":null,"draft_slot":11,"draft_id":"785517577924403201"},{"round":4,"roster_id":8,"player_id":"8145","picked_by":"343873165421764608","pick_no":48,"metadata":{"years_exp":"0","team":"NYJ","status":"Active","sport":"nfl","position":"TE","player_id":"8145","number":"0","news_updated":"1651289735421","last_name":"Ruckert","injury_status":"","first_name":"Jeremy"},"is_keeper":null,"draft_slot":12,"draft_id":"785517577924403201"}]

const fetcher = (url: string)  => axios.get(url).then(res => axios.get('https://api.sleeper.app/v1/user/' + res.data.user_id + '/leagues/nfl/2022').then(res => res.data))


const Overview = () => {
    const router = useRouter();

    const { data, error } = useSWR('https://api.sleeper.app/v1/user/' + router.query.username, fetcher)
    
    if (error) return <div>Failed to load</div>
    if (!data) return <div>Loading...</div>

    return (
        <div className="App">
            <h1>{router.query.username}</h1>
            <Grid
                h='500px'
                templateRows='repeat(2, 1fr)'
                templateColumns='repeat(5, 1fr)'
                gap={1}
                >
                <GridItem rowSpan={2} colSpan={4}>
                    <LeagueCarousel leagues={data}></LeagueCarousel>
                </GridItem>
                <GridItem rowSpan={1} colSpan={1} >
                    <Box
                    role={'group'}
                    p={4}
                    maxW={'800px'}
                    bg={'white.800'}
                    boxShadow={'2xl'}
                    rounded={'lg'}
                    zIndex={1}><PositionDraftTable picks={testDraft}/></Box>
                </GridItem>
                <GridItem colSpan={2} bg='papayawhip' ></GridItem>
                <GridItem colSpan={4} bg='tomato'></GridItem>
            </Grid>
            
        </div>
    );
}

export default Overview;